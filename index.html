<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Sci-Fi Screensaver</title>

<!-- Bootstrap CSS CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
  /* --- Reset & base --- */
  html,body{height:100%;margin:0;background:#000;color:#0f0;overflow:hidden;font-family:Inter,ui-sans-serif,system-ui,monospace}
  #app{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column}
  canvas#rain{position:fixed;inset:0;z-index:0}
  /* --- central holo card --- */
  .holo {
    z-index:5;
    max-width:920px;
    max-height:76vh;
    background:linear-gradient(135deg, rgba(6,10,12,0.18), rgba(6,10,12,0.06));
    border:1px solid rgba(0,255,150,0.06);
    box-shadow: 0 0 120px rgba(0,255,170,0.04), inset 0 0 40px rgba(0,255,150,0.02);
    backdrop-filter: blur(8px) saturate(120%);
    border-radius:12px;
    padding:20px;
    overflow:hidden;
    /* Bootstrap will handle flex layout */
  }
  .pane {
    min-width:0;
    display:flex;flex-direction:column;gap:12px; height:100%;
  }
  .title {font-size:clamp(14px,2.2vw,18px);letter-spacing:1px;color:#6affb8;font-weight:700}
  .big {font-size:clamp(28px,5vw,48px);font-weight:800;color:#a7ffde;text-shadow:0 6px 30px rgba(0,255,160,0.05)}
  .sub {color:rgba(160,255,200,0.6);font-size:12px}
  /* --- terminal log --- */
  .term {
    background:linear-gradient(180deg, rgba(0,0,0,0.28), rgba(0,0,0,0.12));
    border:1px solid rgba(0,255,150,0.04);
    padding:12px;border-radius:8px;height:100%;overflow:auto;font-family:monospace;font-size:13px;color:#9affc1;
    box-shadow: inset 0 0 30px rgba(0,255,160,0.02);
  }
  .term .line{opacity:0.8;margin:4px 0;white-space:pre-wrap}
  .cursor{display:inline-block;width:10px;height:16px;background:#8dffcc;margin-left:6px;animation:blink 1s steps(2) infinite}
  @keyframes blink{50%{opacity:0}}
  /* --- HUD right --- */
  .hud {
    height:100%;
    display:flex;flex-direction:column;gap:10px;
    align-items:stretch;
  }
  .stat {
    background:linear-gradient(90deg, rgba(0,0,0,0.28), rgba(0,0,0,0.12));
    border-radius:8px;padding:10px;border:1px solid rgba(0,255,150,0.03);
    font-size:13px;color:#bfffdc;
  }
  .meter {height:8px;background:rgba(0,255,150,0.08);border-radius:6px;overflow:hidden}
  .meter > i{display:block;height:100%;background:linear-gradient(90deg,#00ffb3,#00a676);width:30%}
  /* scanlines & vignette */
  .scanlines{position:fixed;inset:0;z-index:8;pointer-events:none;background-image:linear-gradient(rgba(0,0,0,0.02) 50%, rgba(255,255,255,0.00) 100%);background-size:100% 3px;mix-blend-mode:overlay}
  .vignette{position:fixed;inset:0;z-index:9;pointer-events:none;background:radial-gradient(1200px 600px at 50% 50%, rgba(0,255,150,0.02), rgba(0,0,0,0.6))}
  /* footer controls */
  .controls{position:fixed;left:12px;bottom:12px;z-index:10}
  /* Override buttons to use Bootstrap styling */
  .btn {
    font-weight: 600;
    backdrop-filter: blur(6px);
    min-width: 70px;
  }
  /* Responsive fixes */
  @media (max-width:820px){
    .holo {
      max-height: none;
      padding:12px;
    }
    .hud {
      width: 100% !important;
    }
  }
</style>
</head>
<body>
<canvas id="rain"></canvas>

<div id="app" aria-hidden="false">
  <div class="holo container-fluid" id="holo">
    <div class="row g-3 h-100">
      <div class="pane col-12 col-md-8 d-flex flex-column">
        <div>
          <div class="title">SYSTEM SYNTH · CORE</div>
          <div class="big" id="bigtext">JIHAN-CORE</div>
          <div class="sub" id="subtext">STATUS • BOOT STANDBY • 35% ECHO</div>
        </div>

        <div class="term" id="terminal" tabindex="0">
          <div class="line">Initializing virtual sensors...</div>
          <div class="line">Loading interface modules...</div>
          <div class="line" id="msg0">Kernel integrity: <strong>OK</strong></div>
          <div class="line" id="msg1">Network: <strong>CONNECTED</strong></div>
          <div class="line" id="msg2">Active processes: <strong>0x1A3</strong></div>
          <div class="line" id="flow">> starting diagnostics<span class="cursor"></span></div>
        </div>
      </div>

      <div class="hud col-12 col-md-4 d-flex flex-column">
        <div class="stat">
          <div class="d-flex justify-content-between"><span>CPU</span><b id="cpu">3%</b></div>
          <div class="meter"><i id="cpubar"></i></div>
        </div>

        <div class="stat">
          <div class="d-flex justify-content-between"><span>Mem</span><b id="mem">18%</b></div>
          <div class="meter"><i id="membar" style="width:18%"></i></div>
        </div>

        <div class="stat">
          <div class="d-flex justify-content-between"><span>NET</span><b id="net">UP</b></div>
          <div style="font-size:12px;color:#9affc1">IP: <span id="ip">192.168.0.12</span></div>
        </div>

        <div class="stat">
          <div style="font-size:12px;opacity:0.8">Random Logs</div>
          <div style="font-family:monospace;font-size:13px;color:#9affc1;opacity:0.9" id="rnd">OK · TRACE · 0x0</div>
        </div>

        <!-- Clock & Stopwatch -->
        <div class="stat" id="clockStopwatch">
          <div class="d-flex justify-content-between align-items-center">
            <span id="modeLabel">Digital Clock</span>
            <button class="btn btn-sm btn-outline-success" id="toggleModeBtn" style="font-size:11px;">Switch to Stopwatch</button>
          </div>
          <div id="digitalClock" class="mt-2" style="font-family: monospace; font-size: 18px; color:#9affc1;"></div>

          <div id="stopwatch" class="mt-2" style="display:none; font-family: monospace; font-size: 18px; color:#9affc1;">
            <span id="swTime">00:00.0</span><br/>
            <button class="btn btn-sm btn-outline-success mt-2" id="swStartPauseBtn">Start</button>
            <button class="btn btn-sm btn-outline-danger ms-2" id="swResetBtn">Reset</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="scanlines"></div>
<div class="vignette"></div>

<div class="controls" id="controls">
  <button class="btn btn-sm btn-outline-info" id="fsBtn">Fullscreen</button>
  <button class="btn btn-sm btn-outline-warning" id="toggleBtn">Pause</button>
</div>

<script>
/* --- Rain canvas (matrix like) --- */
const canvas = document.getElementById('rain');
const ctx = canvas.getContext('2d');
let w = canvas.width = innerWidth;
let h = canvas.height = innerHeight;
window.addEventListener('resize', () => { w = canvas.width = innerWidth; h = canvas.height = innerHeight; initCols(); });

let cols = [];
function initCols(){
  const size = Math.max(12, Math.floor(Math.min(w,1200)/20));
  const count = Math.ceil(w/size);
  cols = new Array(count).fill(0).map(()=>({y: Math.random()*-100, speed: 1+Math.random()*4, size}));
}
initCols();

function draw(){
  ctx.fillStyle = 'rgba(0,0,0,0.12)';
  ctx.fillRect(0,0,w,h);
  ctx.font = 'bold 14px monospace';
  for(let i=0;i<cols.length;i++){
    const c = cols[i];
    const x = i*c.size;
    ctx.fillStyle = 'rgba(0,255,180,0.06)';
    for(let k=0;k<6;k++){
      const t = String.fromCharCode(33 + Math.floor(Math.random()*94));
      ctx.fillStyle = k==5? 'rgba(0,255,170,0.9)':'rgba(0,255,150,0.12)';
      ctx.fillText(t, x, c.y - k*14);
    }
    c.y += c.speed;
    if(c.y > h + 200) c.y = -Math.random()*600;
  }
  if(!paused) requestAnimationFrame(draw);
}
let paused=false;
requestAnimationFrame(draw);

/* --- Terminal typing & random logs --- */
const lines = [
 'Scanning ports...','Handshake success','Probe: thermal stable','Encrypting synthetic cores',
 'AI watchdog: OK','Fuzzy clock sync','Packet loss: 0.01%','Rewriting cache','Optical sensor: sync'
];
const tEl = document.getElementById('terminal');
let idx = 0;
function pushLine(txt){
  const d = document.createElement('div'); d.className='line'; d.textContent = txt;
  tEl.appendChild(d); tEl.scrollTop = tEl.scrollHeight;
}
function typeFlow(){
  const flow = document.getElementById('flow');
  flow.classList.add('typing');
  let text = lines[idx%lines.length];
  let i=0;
  const cur = flow;
  cur.childNodes[0] && (cur.childNodes[0].nodeValue = '> starting diagnostics');
  const t = setInterval(()=> {
    if(i<=text.length){
      cur.firstChild.nodeValue = '> ' + text.slice(0,i) + (i%2? '': '');
      i++;
    } else {
      clearInterval(t);
      pushLine('> ' + text);
      idx++;
      setTimeout(typeFlow, 900 + Math.random()*1600);
    }
  }, 35);
}
setTimeout(typeFlow, 1200);

/* --- HUD stats animate --- */
function rnd(min,max){ return Math.floor(min + Math.random()*(max-min)); }
function updateStats(){
  const cpu = rnd(2,28); const mem = rnd(12,68);
  document.getElementById('cpu').textContent = cpu+'%';
  document.getElementById('cpubar').style.width = cpu+'%';
  document.getElementById('mem').textContent = mem+'%';
  document.getElementById('membar').style.width = mem+'%';
  document.getElementById('rnd').textContent = ['OK','TRACE','WARN','0xFF', 'SYNC'][Math.floor(Math.random()*5)];
  requestAnimationFrame(()=>setTimeout(updateStats, 2000 + Math.random()*4000));
}
updateStats();

/* --- small flicker & noise on title --- */
const big = document.getElementById('bigtext');
setInterval(()=> {
  big.style.opacity = 0.82 + Math.random()*0.18;
  document.getElementById('subtext').style.opacity = 0.6 + Math.random()*0.3;
}, 700);

/* --- Fullscreen & controls --- */
const fsBtn = document.getElementById('fsBtn'), togg = document.getElementById('toggleBtn');
fsBtn.onclick = async () => {
  if(!document.fullscreenElement){
    await document.documentElement.requestFullscreen().catch(()=>{});
    fsBtn.textContent='Exit FS';
  } else {
    await document.exitFullscreen().catch(()=>{});
    fsBtn.textContent='Fullscreen';
  }
};
togg.onclick = ()=>{ paused = !paused; togg.textContent = paused? 'Resume':'Pause'; if(!paused) requestAnimationFrame(draw); };

/* --- Touch to show controls briefly --- */
let controls = document.getElementById('controls');
let hideTimer = null;
function showControls(){ controls.style.opacity=1; controls.style.transform='translateY(0)'; clearTimeout(hideTimer); hideTimer=setTimeout(()=>{controls.style.opacity=0.9},5000); }
document.addEventListener('mousemove', showControls);
document.addEventListener('touchstart', showControls);

/* --- nice entrance animation --- */
const holo = document.getElementById('holo');
holo.style.transform = 'scale(0.96) translateY(10px)';
holo.style.opacity = 0;
setTimeout(()=>{ holo.style.transition='transform 650ms cubic-bezier(.2,.9,.2,1), opacity 600ms'; holo.style.transform='scale(1)'; holo.style.opacity=1; },100);

/* --- try to get IP (best-effort) --- */
fetch('https://api.ipify.org?format=json').then(r=>r.json()).then(j=>{ document.getElementById('ip').textContent=j.ip }).catch(()=>{});

/* --- Clock & Stopwatch logic --- */
const modeLabel = document.getElementById('modeLabel');
const toggleModeBtn = document.getElementById('toggleModeBtn');
const digitalClock = document.getElementById('digitalClock');
const stopwatchEl = document.getElementById('stopwatch');
const swTime = document.getElementById('swTime');
const swStartPauseBtn = document.getElementById('swStartPauseBtn');
const swResetBtn = document.getElementById('swResetBtn');

let mode = 'clock'; // or 'stopwatch'

// Digital Clock update
function updateClock(){
  if(mode !== 'clock') return;
  const now = new Date();
  const hh = String(now.getHours()).padStart(2,'0');
  const mm = String(now.getMinutes()).padStart(2,'0');
  const ss = String(now.getSeconds()).padStart(2,'0');
  digitalClock.textContent = `${hh}:${mm}:${ss}`;
}
setInterval(updateClock, 1000);
updateClock();

// Stopwatch variables
let swRunning = false;
let swStartTime = 0;
let swElapsed = 0;
let swTimer = null;

function updateStopwatch(){
  if(!swRunning) return;
  const now = performance.now();
  swElapsed = now - swStartTime;
  const total = swElapsed + (swAccumulated || 0);
  const date = new Date(total);
  const mm = String(date.getUTCMinutes()).padStart(2,'0');
  const ss = String(date.getUTCSeconds()).padStart(2,'0');
  const ms = Math.floor(date.getUTCMilliseconds() / 100);
  swTime.textContent = `${mm}:${ss}.${ms}`;
  swTimer = requestAnimationFrame(updateStopwatch);
}

let swAccumulated = 0; // stores paused elapsed time

swStartPauseBtn.onclick = () => {
  if(!swRunning){
    swRunning = true;
    swStartTime = performance.now();
    updateStopwatch();
    swStartPauseBtn.textContent = 'Pause';
  } else {
    swRunning = false;
    swAccumulated += performance.now() - swStartTime;
    cancelAnimationFrame(swTimer);
    swStartPauseBtn.textContent = 'Start';
  }
};

swResetBtn.onclick = () => {
  swRunning = false;
  cancelAnimationFrame(swTimer);
  swElapsed = 0;
  swAccumulated = 0;
  swTime.textContent = '00:00.0';
  swStartPauseBtn.textContent = 'Start';
};

// Toggle between Clock and Stopwatch
toggleModeBtn.onclick = () => {
  if(mode === 'clock'){
    mode = 'stopwatch';
    modeLabel.textContent = 'Stopwatch';
    toggleModeBtn.textContent = 'Switch to Clock';
    digitalClock.style.display = 'none';
    stopwatchEl.style.display = 'block';
  } else {
    mode = 'clock';
    modeLabel.textContent = 'Digital Clock';
    toggleModeBtn.textContent = 'Switch to Stopwatch';
    stopwatchEl.style.display = 'none';
    digitalClock.style.display = 'block';
  }
};
</script>

</body>
</html>
